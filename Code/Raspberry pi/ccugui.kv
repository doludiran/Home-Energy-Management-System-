<CCUGUI>:
    id: manager
<HomeScreen>:
    id: 'Home'
    BoxLayout:
        orientation: 'vertical'
        canvas:
            Color:
                rgba: 1, 1, 1, 1 
            Rectangle:
                size: root.width, root.height
                pos: 0, 0
        GridLayout:
            cols: 2
            BoxLayout:
                id: touplot
                orientation: 'vertical'
                size_hint: .5,.5                         
                            
            BoxLayout:
                orientation: 'vertical'
                size_hint: .4,.4
                
                AnchorLayout:
                    anchor_x: 'center'
                    anchor_y: 'bottom'
                    Button:
                        id: 'HomeButton'
                        size_hint: .15, .2
                        on_press: root.manager.current= 'Menu'
            
                        Image:
                            source: 'icon.png'
                            center_y: self.parent.center_y 
                            center_x: self.parent.center_x
                            size: 120, 120
                            allow_strech: True
                
                BoxLayout:
                    orientation: 'vertical'
                    AnchorLayout:
                        anchor_x: 'center'
                        Label:
                            text: root.time
                            color: 0,0,0,1
                            font_size:25
                            size_hint: .05,.05
                       
                    AnchorLayout:
                        anchor_y: 'top'
                        Label:
                            text: root.date
                            color: 0,0,0,1
                            font_size:40
                            size_hint: .05,.05
        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1, 0.1
            GridLayout:
                cols: 3
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 0.1,1
                    Label:
                        id: onpeak
                        text: '[b]ON-PEAK[/b]'
                        markup: True
                        font_size:20
                        color: 0.905,0.30,0.24,1
                            
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 0.1,1
                    Label:
                        id: midpeak
                        text: '[b]MID-PEAK[/b]'
                        markup: True
                        font_size:20
                        color: 0.905,0.64,0.24,1
                            
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 0.1,1
                        
                    Label:
                        id: offpeak
                        text: '[b]OFF-PEAK[/b]'
                        markup: True
                        font_size:20
                        color: 0.18,0.8,0.44,1
   
   
<MenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: root.width, root.height
                pos: 0, 0
        Button:
            text: 'Back'
            on_press: root.manager.current= 'Home'
            size_hint: 0.1,0.15
            
        AnchorLayout:
            orientation: 'horizontal'
            anchor_x: 'center'
            GridLayout:
                cols: 2
                size_hint: .23, .42
                Button:
                    id: 'Therm'
                    on_press: root.manager.current= 'Thermostat'
                    size_hint: .15, .15
                    Image:
                        source: 'thermostat.png'
                        center_y: self.parent.center_y 
                        center_x: self.parent.center_x
                        size: 150, 90
                        allow_strech: True
                Button:
                    id: 'EV'
                    on_press: root.manager.current= 'EV'
                    size_hint: .15, .15
                    Image:
                        source: 'car.png'
                        center_y: self.parent.center_y 
                        center_x: self.parent.center_x
                        size: 150, 90
                        allow_strech: True
                Button:
                    id: 'Water'
                    size_hint: .15, .15
                    Image:
                        source: 'water.png'
                        center_y: self.parent.center_y 
                        center_x: self.parent.center_x
                        size: 150,90
                        allow_strech: True
                Button:
                    id: 'x10'
                    size_hint: .15, .15
                    Image:
                        source: 'x10.png'
                        center_y: self.parent.center_y 
                        center_x: self.parent.center_x
                        size: 150, 90
                        allow_strech: True
<EVScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: root.width, root.height
                pos: 0, 0
        
        GridLayout:
            cols: 4
            size_hint: 1, 0.2
            Button:
                text: 'Back'
                size_hint: 0.2, 0.2
                on_press: root.manager.current= 'Menu'
            Label:
                id: tusage
                text: 'Total Usage:'
                color: 0,0,0,1
            Label:
                id: tcost
                text: 'Total Cost:'
                color: 0,0,0,1
        
        TabbedPanel:
            do_default_tab: False
            background_color: (1,1,1,0)
            tab_pos: 'top_right'
            TabbedPanelItem:
                text: 'Daily'
                GridLayout:
                    cols: 2
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint: 0.2,0.2
                        canvas:
                            Color:
                                rgba: 0.29,0.54,0.29,1
                            Ellipse:
                                size: 120, 120
                                pos: 13, 180
                        Label:
                            id: powerdis
                            text: 'Live Usage: \n 0kW'
                            font_size: 20
                            color: 0,0,0,1
                            pos: 15, 250
                            
                            
                    BoxLayout:
                        id: consdata
                        orientation: 'vertical'
            
            TabbedPanelItem:
                text: 'Monthly'
                BoxLayout:
                    id: monthly
                    orientation: 'vertical'
            
        Label:
            id: charge
            text: 'Not Charging'
            color: 0,0,0,1
            size_hint: 1, 0.1
        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1, 0.2
            Button:
                id: overide
                text: 'Turn On'
                on_press: root.dr_override = True         
            Button:
                id: 'schedule'
                text: 'Schedule'
                on_press: root.manager.current = 'sched'
        

<ThermostatScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: root.width, root.height
                pos: 0, 0
        Button:
            text: 'Back'
            size_hint: 0.1, 0.15
            on_press: root.manager.current= 'Menu'
                    
        GridLayout:
            id: thermostat
            cols: 3
            colour: (2, 0, 0, 1)
            btn_colour: (2.5, 0, 0, 1)
            BoxLayout:
                orientation: 'vertical'
                FloatLayout:
                    Button:
                        id: dresponse
                        text: 'Demand Response'
                        background_color: self.parent.parent.parent.btn_colour
                        size_hint: 1, 0.15
                        pos: 0, 60
                
                        
            BoxLayout:
                orientation: 'vertical'
#                Label:
#                    id: temperature
#                    text: "Thermostat"
#                    color: self.parent.parent.colour
#                    font_size: 20
                Button:
                    name: 'increase'
                    background_color: 0, 0, 0, 0
                    canvas:
                        Color: 
                            rgba: self.parent.parent.colour
                        Triangle:
                            points: [self.center_x - 40, self.center_y - 20,self.center_x, self.center_y + 40,self.center_x + 40, self.center_y - 20]
                    on_press: root.therm_inc_dec(self)
                    
                Label:
                    id: settemp
                    text: "25"
                    color: self.parent.parent.colour
                    font_size: 125
                Button:
                    name: 'decrease'
                    background_color: 0, 0, 0, 0
                    size: 10, 10
                    canvas:
                        Color:
                            rgba: self.parent.parent.colour
                        Triangle:
                            points: [self.center_x - 40, self.center_y + 20,self.center_x, self.center_y - 40,self.center_x + 40, self.center_y + 20]
                    on_press: root.therm_inc_dec(self) 
                     
                Label:
                    id: mode
                    text: "Heating"
                    color: self.parent.parent.colour
                    font_size: 20
                        
            BoxLayout: 
                orientation: 'horizontal'
                FloatLayout:
                    Label:
                        text: "Current Temperature: "
                        color: self.parent.parent.parent.colour
                        font_size: 18
                        pos: 590, 270
                         
                FloatLayout:
                    Label:
                        id: current
                        text: "25"
                        color: self.parent.parent.parent.colour
                        font_size: 30
                        pos: 700, 270
        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1,0.14
            Button:
                id: heat
                text: 'Heat'
                font_size: 20
                background_color: root.ids.thermostat.btn_colour
                on_press: root.heat_mode()
            Button:
                id: cool
                text: 'Cool'
                font_size: 20
                size: 10, 10
                background_color: root.ids.thermostat.btn_colour
                on_press: root.cool_mode()

<schedule>:
    id: schedule
    active_text: "starttime"
    BoxLayout:
        orientation: 'vertical'
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: root.width, root.height
                pos: 0, 0
        BoxLayout:
            orientation: 'horizontal'
            size_hint:  1, 0.2
            Button:
                id: back
                text: 'Back'
                on_press: root.manager.current= 'EV'
            Button:
                id: DeleteSchedule
                text: 'Delete Current Schedule'
                on_press: root.deleteSchedule()
                
        GridLayout:
            cols: 2
            BoxLayout:
                orientation: 'vertical'
                BoxLayout:
                    orientation: 'horizontal'
                    Button:
                        text: 'Start time (HH:MM):'
                        on_press: root.active_text = "starttime"
                    Label:
                        id: starttime
                        text:''
                        color: 0,0,0,1
                BoxLayout:
                    orientation: 'horizontal'
                    Button:
                        text: 'Deadline (HH:MM):'
                        on_press: root.active_text = "deadline"
                    Label:
                        id: deadline
                        text: ''
                        color: 0,0,0,1
            BoxLayout:
                orientation: 'vertical'
                AnchorLayout:
                    anchor_x: 'center'
                    GridLayout:
                        cols: 3
                        size_hint:  0.7, 0.8
                        Button:
                            text: '1'
                            on_press: root.keypadInput(self)
                        Button:
                            text: '2'
                            on_press: root.keypadInput(self)
                        Button:
                            text: '3'
                            on_press: root.keypadInput(self)
                        Button:
                            text: '4'
                            on_press: root.keypadInput(self)
                        Button:
                            text: '5'
                            on_press: root.keypadInput(self)
                        Button:
                            text: '6'
                            on_press: root.keypadInput(self)
                        Button:
                            text: '7'
                            on_press: root.keypadInput(self)
                        Button:
                            text: '8'
                            on_press: root.keypadInput(self)
                        Button:
                            text: '9'
                            on_press: root.keypadInput(self)
                        Button:
                            text: 'Delete'
                            on_press:  root.keypadInput(self)
                        Button:
                            text: '0'
                            on_press: root.keypadInput(self)
        Label:
            id: notification
            text: ''
            font_size: 30
            color: 0,0,0,1
            size_hint: 1, 0.05
            
        AnchorLayout:
            anchor_x: 'center'
            size_hint:  1, 0.2 
            Button:
                id: 'Done'
                text: 'Done'
                on_press: root.submitSchedule()
                size_hint:  0.2, 0.9

                    
                